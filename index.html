<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PriceFirst ‚Äî Instant Local Price Ranges</title>
  <meta name="description" content="Instant local price ranges for Remodeling, Cleaning, Plumbing, HVAC, and Pet Care in Palm Beach & Broward. No calls. No pressure." />
  <style>
    :root{
      --bg:#070b34;
      --muted:#c7d2fe;
      --text:#ffffff;
      --accent:#22d3ee;
      --accent2:#a78bfa;
      --accent3:#34d399;
      --shadow: 0 20px 60px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:radial-gradient(1200px 700px at 10% -10%, rgba(34,211,238,.35), transparent),radial-gradient(1200px 800px at 90% 0%, rgba(167,139,250,.35), transparent),var(--bg);color:var(--text)}
    a{color:inherit}
    .wrap{max-width:1200px;margin:0 auto;padding:24px}

    header{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:10px 0 22px}
    .brand{display:flex;align-items:center;gap:12px;font-weight:900}
    .logo{width:42px;height:42px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent2));box-shadow:var(--shadow)}
    nav{display:flex;gap:14px;flex-wrap:wrap}
    nav a{text-decoration:none;font-weight:700;opacity:.9}
    nav a:hover{opacity:1;text-decoration:underline}

    .card{background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));border:1px solid rgba(255,255,255,.18);border-radius:22px;box-shadow:var(--shadow)}
    .hero{display:grid;grid-template-columns:1.1fr .9fr;gap:18px}
    @media (max-width: 960px){.hero{grid-template-columns:1fr}}

    .left{padding:30px}
    h1{margin:0 0 12px;font-size:46px;line-height:1.05}
    h2{margin:0 0 10px}
    h3{margin:0 0 6px}
    .sub{color:var(--muted);font-size:17px;line-height:1.55;margin:0}

    .ctaRow{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px}
    .btn{appearance:none;border:0;border-radius:16px;padding:14px 16px;font-weight:900;cursor:pointer;display:inline-flex;align-items:center;gap:8px}
    .btn.primary{background:linear-gradient(135deg,var(--accent),var(--accent3));color:#022c22}
    .btn.ghost{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.22);color:var(--text)}
    .btn:hover{transform:translateY(-1px)}

    .right{padding:20px}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    .tab{padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.22);background:rgba(255,255,255,.12);cursor:pointer;font-weight:900}
    .tab.active{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#04111d}

    form{display:grid;gap:10px}
    .row2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    label{font-size:12px;color:var(--muted);font-weight:900}
    input, select, textarea{width:100%;padding:12px;border-radius:14px;border:1px solid rgba(255,255,255,.22);background:rgba(0,0,0,.25);color:var(--text)}
    textarea{min-height:84px}

    .quoteBox{margin-top:12px;padding:16px;border-radius:18px;border:1px solid rgba(255,255,255,.22);background:rgba(0,0,0,.35)}
    .quoteAmt{font-size:24px;font-weight:900}
    .fine{color:var(--muted);font-size:13px;line-height:1.5;margin:0}

    section{padding:20px;margin-top:18px}

    .grid3{display:grid;grid-template-columns:repeat(3, 1fr);gap:12px;margin-top:16px}
    @media (max-width: 960px){.grid3{grid-template-columns:1fr}}
    .mini{padding:16px}
    .mini p{margin:0;color:var(--muted);line-height:1.55}

    /* Trust badges */
    .badges > div{font-size:14px}

    /* Responsive */
    @media (max-width: 640px){
      h1{font-size:34px}
      .left{padding:22px}
      .right{padding:16px}
      .ctaRow{gap:10px}
      .btn{width:100%;justify-content:center}
      .tabs{justify-content:center}
    }
    @media (max-width: 560px){
      h1{font-size:36px;line-height:1.08}
      .ctaRow{flex-direction:column}
      .row2{grid-template-columns:1fr}
      .badges{gap:8px}
      .badges > div{padding:10px 12px;font-size:13px}
    }

    footer{margin-top:28px;padding:18px 0;color:var(--muted);font-size:13px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:10px}
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand"><div class="logo" aria-hidden="true"></div> PriceFirst</div>
    <nav>
      <a href="#quote">Get Quote</a>
      <a href="#how">How it works</a>
      <a href="#providers">Providers</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <div class="hero">
    <div class="card left">
      <h1>See the price first.<br/>Then choose your provider.</h1>
      <p class="sub">Get an instant local price range for <b>Remodeling</b>, <b>Cleaning</b>, <b>Plumbing</b>, <b>HVAC</b>, and <b>Pet Care</b> in Palm Beach & Broward County. No calls. No pressure.</p>

      <div class="ctaRow">
        <button class="btn primary" type="button" onclick="document.querySelector('#quote').scrollIntoView({behavior:'smooth'})">‚ö° Get Instant Quote</button>
        <button class="btn ghost" type="button" onclick="document.querySelector('#providers').scrollIntoView({behavior:'smooth'})">üë∑ Become a Provider</button>
      </div>

      <div class="badges" style="display:flex;gap:10px;flex-wrap:wrap;margin-top:14px">
        <div style="padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.22);background:rgba(255,255,255,.10);font-weight:900">‚è±Ô∏è 60-second estimate</div>
        <div style="padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.22);background:rgba(255,255,255,.10);font-weight:900">‚úÖ Price-aware clients</div>
        <div style="padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.22);background:rgba(255,255,255,.10);font-weight:900">üìç Local matching</div>
        <div style="padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.22);background:rgba(255,255,255,.10);font-weight:900">üîí No bank info</div>
      </div>
    </div>

    <div class="card right" id="quote">
      <div class="tabs" aria-label="Services">
        <button class="tab active" type="button" data-svc="cleaning">Cleaning</button>
        <button class="tab" type="button" data-svc="pet">Pet Care</button>
        <button class="tab" type="button" data-svc="remodel">Remodeling</button>
        <button class="tab" type="button" data-svc="plumbing">Plumbing</button>
        <button class="tab" type="button" data-svc="hvac">HVAC</button>
      </div>

      <form id="quoteForm">
        <div class="row2">
          <div>
            <label for="county">County</label>
            <select id="county" required>
              <option value="broward" selected>Broward</option>
              <option value="palmbeach">Palm Beach</option>
            </select>
          </div>
          <div>
            <label for="zip">ZIP Code</label>
            <input id="zip" inputmode="numeric" maxlength="5" placeholder="e.g., 33063" required />
          </div>
        </div>

        <div>
          <label for="svcType">Service type</label>
          <select id="svcType" required></select>
        </div>

        <div id="serviceFields"></div>

        <div class="row2">
          <div>
            <label for="timeline">When do you need it?</label>
            <select id="timeline">
              <option value="flex" selected>Flexible</option>
              <option value="soon">Within 7 days</option>
              <option value="asap">ASAP (48‚Äì72 hours)</option>
            </select>
          </div>
          <div>
            <label for="level">Service level</label>
            <select id="level">
              <option value="standard" selected>Standard</option>
              <option value="premium">Premium</option>
            </select>
          </div>
        </div>

        <button class="btn primary" type="button" id="showBtn">Show Price Range</button>

        <div class="quoteBox" id="quoteBox" style="display:none">
          <div class="quoteAmt" id="quoteAmt">$ ‚Äî</div>
          <p class="fine" id="quoteNote">Estimates are market-based ranges. Final pricing depends on scope and site conditions.</p>
          <div style="margin-top:10px">
            <button class="btn ghost" type="button" id="matchBtn">Get Matched</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="grid3" id="how">
    <div class="card mini">
      <h3>1) Answer a few questions</h3>
      <p>We estimate based on job size, service type, and local market ranges.</p>
    </div>
    <div class="card mini">
      <h3>2) Get a price range instantly</h3>
      <p>Transparent ranges help you avoid surprises and avoid wasted calls.</p>
    </div>
    <div class="card mini">
      <h3>3) Get matched with providers</h3>
      <p>We route your request to providers that match your service and area.</p>
    </div>
  </div>

  <section class="card">
    <h2>How it works</h2>
    <p class="sub" style="margin-top:8px"><b>PriceFirst</b> gives you an <b>instant estimate range</b> (not a final contract price). Final pricing depends on scope confirmation, condition, access, and material choices.</p>
    <p class="sub" style="margin-top:10px"><b>Cleaning</b> and <b>Pet Care</b> ranges are tighter and often close to the final price. <b>Remodeling</b>, <b>Plumbing</b>, and <b>HVAC</b> ranges are wider because scope and site conditions can vary.</p>
    <p class="sub" style="margin-top:10px">Want to be contacted? Tap <b>Get Matched</b>. We share your request with providers who serve your ZIP code.</p>
  </section>

  <section id="providers" class="card">
    <h2>Become a Provider</h2>
    <p class="sub">Get pre-priced, local leads. No monthly fee at launch.</p>
    <p class="fine" style="margin-top:10px">(MVP note) Provider onboarding and lead delivery can be handled manually at first.</p>
  </section>

  <section id="contact" class="card">
    <h2>Contact</h2>
    <p class="sub">Questions? Want early access? Reach out.</p>
  </section>

  <footer>
    <div>¬© <span id="yr"></span> PriceFirst ‚Ä¢ Palm Beach & Broward</div>
    <div>Transparent price ranges</div>
  </footer>
</div>

<script>
  // ===== CONFIG =====
  // Change this to YOUR email address.
  // When a user clicks "Get Matched", it will open a pre-filled email to you.
  const ADMIN_EMAIL = "you@yourdomain.com";

  // ===== UI ELEMENTS =====
  const svcSelect = document.getElementById('svcType');
  const fields = document.getElementById('serviceFields');
  const quoteBox = document.getElementById('quoteBox');
  const quoteAmt = document.getElementById('quoteAmt');
  const quoteNote = document.getElementById('quoteNote');

  // ===== MULTIPLIERS =====
  const COUNTY_MULT = { broward: 1.00, palmbeach: 1.08 };
  const LEVEL_MULT = { standard: 1.00, premium: 1.20 };
  const TIME_MULT  = { flex: 1.00, soon: 1.08, asap: 1.18 };

  // ===== SERVICE LISTS (drives the dropdown) =====
  const SERVICES = {
    remodel: ['Interior Painting','Exterior Painting','Flooring','Drywall','Windows & Doors','Carpentry','Other'],
    cleaning: ['Residential','Post Construction','Office','Commercial'],
    plumbing: ['New Construction / Remodel','Leak Detection','Water Supply System','Drain-Waste-Vent (DWV)','Water Heaters','Other'],
    hvac: ['Complete System Installation','Ductwork','Duct Cleaning','Service & Repairs','Preventive Maintenance','Indoor Air Quality','Controls & Energy Efficiency','Commercial / Condo Work'],
    pet: ['Walking','Sitting','Wash & Haircut']
  };

  // Baseline rate cards (Broward, Standard, Flexible). Calibrate with real quotes over time.
  const RATE = {
    cleaning: {
      'Residential': { min: 150, perSqLow: 0.12, perSqHigh: 0.18 },
      'Post Construction': { min: 280, perSqLow: 0.22, perSqHigh: 0.32 },
      'Office': { min: 200, perSqLow: 0.10, perSqHigh: 0.16 },
      'Commercial': { min: 240, perSqLow: 0.11, perSqHigh: 0.18 }
    },
    pet: {
      'Walking': { low: 25, high: 40 },
      'Sitting': { low: 60, high: 110 },
      'Wash & Haircut': { low: 75, high: 140 }
    },
    remodel: {
      // Painting uses "paintable area" approximation (sq ft)
      'Interior Painting': { perSqLow: 1.40, perSqHigh: 3.20, min: 900 },
      'Exterior Painting': { perSqLow: 1.80, perSqHigh: 4.20, min: 1400 },

      // Flooring uses FLOOR area (sq ft), installed price includes basic materials
      'Flooring': { perSqLow: 4.50, perSqHigh: 10.50, min: 900 },

      // Drywall uses DRYWALL SURFACE area (walls/ceilings sq ft)
      'Drywall': { perSqLow: 2.20, perSqHigh: 6.50, min: 800 },

      'Windows & Doors': { lowEach: 650, highEach: 1800, min: 1200 },
      'Carpentry': { lowEach: 350, highEach: 1200, min: 800 },
      'Other': { min: 1000, low: 1000, high: 3500 }
    },
    plumbing: {
      'Leak Detection': { low: 250, high: 650, addHigh: 250 },
      'Water Heaters': { lowEach: 1100, highEach: 2600, min: 1100 },
      'Drain-Waste-Vent (DWV)': { lowEach: 450, highEach: 1800, min: 850 },
      'Water Supply System': { lowEach: 350, highEach: 1400, min: 650 },
      'New Construction / Remodel': { min: 1500, low: 1500, high: 8000 },
      'Other': { lowEach: 250, highEach: 1200, min: 300 }
    },
    hvac: {
      'Complete System Installation': { lowEach: 5200, highEach: 10500, min: 5200 },
      'Ductwork': { lowEach: 900, highEach: 4200, min: 1200 },
      'Duct Cleaning': { lowEach: 250, highEach: 650, min: 350 },
      'Service & Repairs': { lowEach: 200, highEach: 1200, min: 220 },
      'Preventive Maintenance': { lowEach: 150, highEach: 320, min: 180 },
      'Indoor Air Quality': { lowEach: 250, highEach: 2200, min: 250 },
      'Controls & Energy Efficiency': { lowEach: 300, highEach: 1800, min: 350 },
      'Commercial / Condo Work': { min: 800, low: 800, high: 9000 }
    }
  };

  let current = 'cleaning';

  function validateZip(v){
    return /^[0-9]{5}$/.test(String(v||'').trim());
  }

  function money(n){
    return n.toLocaleString(undefined,{style:'currency',currency:'USD',maximumFractionDigits:0});
  }

  function setActiveTab(svc){
    current = svc;
    document.querySelectorAll('.tab').forEach(b => b.classList.toggle('active', b.dataset.svc === svc));

    // Fill dropdown
    svcSelect.innerHTML = SERVICES[svc].map(x => `<option>${x}</option>`).join('');

    // Service-specific questions
    if(svc==='cleaning'){
      fields.innerHTML = `
        <div class="row2">
          <div>
            <label for="sqft">Home size (sq ft)</label>
            <input id="sqft" inputmode="numeric" placeholder="e.g., 1200" required />
          </div>
          <div>
            <label for="baths">Bathrooms</label>
            <select id="baths">
              <option value="1">1</option>
              <option value="2" selected>2</option>
              <option value="3">3</option>
              <option value="4">4+</option>
            </select>
          </div>
        </div>
        <div class="row2">
          <div>
            <label for="freq">Frequency</label>
            <select id="freq">
              <option value="onetime" selected>One-time</option>
              <option value="weekly">Weekly</option>
              <option value="biweekly">Bi-weekly</option>
              <option value="monthly">Monthly</option>
            </select>
          </div>
          <div>
            <label for="depth">Clean type</label>
            <select id="depth">
              <option value="standard" selected>Standard</option>
              <option value="deep">Deep clean</option>
              <option value="move">Move-in / Move-out</option>
            </select>
          </div>
        </div>
      `;

    } else if(svc==='pet'){
      fields.innerHTML = `
        <div class="row2">
          <div>
            <label for="pets">Pets</label>
            <select id="pets">
              <option value="1" selected>1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4+</option>
            </select>
          </div>
          <div>
            <label for="petFreq">How often?</label>
            <select id="petFreq">
              <option value="once" selected>One-time</option>
              <option value="weekly">Weekly</option>
              <option value="daily">Daily</option>
            </select>
          </div>
        </div>
      `;

    } else if(svc==='remodel'){
      fields.innerHTML = `
        <div class="row2">
          <div>
            <label for="stories">Stories / access</label>
            <select id="stories">
              <option value="1" selected>1-story / easy access</option>
              <option value="2">2-story / ladders</option>
              <option value="3">3+ / hard access</option>
            </select>
          </div>
          <div>
            <label for="prep">Prep / repairs needed</label>
            <select id="prep">
              <option value="light" selected>Light (minor patching)</option>
              <option value="medium">Medium (cracks, sanding)</option>
              <option value="heavy">Heavy (repairs, skim, stucco)</option>
            </select>
          </div>
        </div>

        <div id="remodelDynamic"></div>

        <div>
          <label for="notes">Notes (optional)</label>
          <textarea id="notes" placeholder="e.g., condo rules, access, materials already purchased..."></textarea>
        </div>
      `;
      renderRemodelDynamic();

    } else if(svc==='plumbing'){
      fields.innerHTML = `
        <div>
          <label for="plUnits">How many items?</label>
          <select id="plUnits">
            <option value="1" selected>1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4+</option>
          </select>
        </div>
        <div>
          <label for="notes">Notes (optional)</label>
          <textarea id="notes" placeholder="e.g., slab leak, shutoff access, water heater size..."></textarea>
        </div>
      `;

    } else if(svc==='hvac'){
      fields.innerHTML = `
        <div>
          <label for="hvUnits">How many units/areas?</label>
          <select id="hvUnits">
            <option value="1" selected>1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4+</option>
          </select>
        </div>
        <div>
          <label for="notes">Notes (optional)</label>
          <textarea id="notes" placeholder="e.g., tonnage, condo restrictions, existing duct condition...\"></textarea>
        </div>
      `;
    }

    quoteBox.style.display = 'none';
  }

  // Remodeling dynamic sub-fields
  function renderRemodelDynamic(){
    const host = document.getElementById('remodelDynamic');
    if(!host) return;

    const trade = svcSelect.value;

    if(trade === 'Flooring'){
      host.innerHTML = `
        <div class="row2">
          <div>
            <label for="floorSqft">Floor area (sq ft)</label>
            <input id="floorSqft" inputmode="numeric" placeholder="e.g., 450" required />
          </div>
          <div>
            <label for="floorType">Flooring material</label>
            <select id="floorType" required>
              <option value="laminate" selected>Laminate</option>
              <option value="wood">Wood</option>
              <option value="tile">Tile</option>
              <option value="stone">Natural stone</option>
              <option value="carpet">Carpet</option>
            </select>
          </div>
        </div>
      `;
      return;
    }

    if(trade === 'Drywall'){
      host.innerHTML = `
        <div>
          <label for="drySqft">Drywall surface area (walls/ceilings sq ft)</label>
          <input id="drySqft" inputmode="numeric" placeholder="e.g., 900" required />
        </div>
      `;
      return;
    }

    if(trade === 'Windows & Doors' || trade === 'Carpentry'){
      host.innerHTML = `
        <div>
          <label for="remUnits">How many items?</label>
          <select id="remUnits">
            <option value="1">1</option>
            <option value="2" selected>2</option>
            <option value="3">3</option>
            <option value="4">4+</option>
          </select>
        </div>
      `;
      return;
    }

    // Painting + default
    host.innerHTML = `
      <div>
        <label for="area">Area / size (sq ft)</label>
        <input id="area" inputmode="numeric" placeholder="e.g., 300" required />
      </div>
      <div>
        <label for="paintScope">If painting: scope</label>
        <select id="paintScope">
          <option value="walls" selected>Walls only</option>
          <option value="wallsceil">Walls + ceilings</option>
          <option value="full">Walls + ceilings + trim</option>
        </select>
      </div>
    `;
  }

  // Tabs
  document.querySelectorAll('.tab').forEach(btn => btn.addEventListener('click', () => setActiveTab(btn.dataset.svc)));

  // Re-render remodel fields when subtype changes
  svcSelect.addEventListener('change', () => {
    if(current === 'remodel') renderRemodelDynamic();
    quoteBox.style.display = 'none';
  });

  // Contractor-realistic calculator
  function calcRange(){
    const county = document.getElementById('county').value;
    const zip = document.getElementById('zip').value.trim();
    const timeline = document.getElementById('timeline').value;
    const level = document.getElementById('level').value;

    if(!validateZip(zip)){
      alert('Please enter a 5-digit ZIP code.');
      return null;
    }

    // Small market multipliers
    const mult = COUNTY_MULT[county] * LEVEL_MULT[level] * TIME_MULT[timeline];
    const clampMin = (v, m) => Math.max(m || 0, v);

    let low = 0;
    let high = 0;

    if(current==='cleaning'){
      const sqft = Number(document.getElementById('sqft').value);
      if(!sqft || sqft < 200){ alert('Please enter a realistic home size (sq ft).'); return null; }

      const t = svcSelect.value;
      const baths = document.getElementById('baths').value;
      const freq = document.getElementById('freq').value;
      const depth = document.getElementById('depth').value;

      const rc = RATE.cleaning[t] || RATE.cleaning['Residential'];

      low = clampMin(sqft * rc.perSqLow, rc.min);
      high = clampMin(sqft * rc.perSqHigh, rc.min);

      const bathMult = { '1':1.00, '2':1.10, '3':1.22, '4':1.35 }[baths] || 1.10;
      low *= bathMult; high *= bathMult;

      const depthMult = { standard:1.00, deep:1.18, move:1.28 }[depth] || 1.0;
      low *= depthMult; high *= depthMult;

      const freqMult = { onetime:1.00, weekly:0.82, biweekly:0.90, monthly:0.96 }[freq] || 1.0;
      low *= freqMult; high *= freqMult;

      low *= mult; high *= mult;

      // predictable: tight band
      low *= 0.96;
      high *= 1.06;

    } else if(current==='pet'){
      const svc = svcSelect.value;
      const pets = Number(document.getElementById('pets').value);
      const petFreq = document.getElementById('petFreq').value;

      const rc = RATE.pet[svc] || {low:25, high:45};
      low = rc.low; high = rc.high;

      const petsMult = {1:1.0,2:1.25,3:1.45,4:1.65}[pets] || 1.0;
      const freqMult = { once:1.0, weekly:0.98, daily:0.95 }[petFreq] || 1.0;

      low *= petsMult * freqMult * mult;
      high *= petsMult * freqMult * mult;

    } else if(current==='remodel'){
      const trade = svcSelect.value;
      const stories = document.getElementById('stories')?.value || '1';
      const prep = document.getElementById('prep')?.value || 'light';

      const storyMult = { '1':1.00, '2':1.12, '3':1.28 }[stories] || 1.0;
      const prepMult = { light:1.00, medium:1.15, heavy:1.35 }[prep] || 1.0;

      const rc = RATE.remodel[trade] || RATE.remodel['Other'];

      if(trade==='Interior Painting' || trade==='Exterior Painting'){
        const area = Number(document.getElementById('area')?.value);
        if(!area || area < 20){ alert('Please enter a realistic area/size.'); return null; }
        const paintScope = document.getElementById('paintScope')?.value || 'walls';
        const paintMult = { walls:1.00, wallsceil:1.22, full:1.45 }[paintScope] || 1.0;

        low = clampMin(area * rc.perSqLow, rc.min);
        high = clampMin(area * rc.perSqHigh, rc.min);
        low *= storyMult * prepMult * paintMult;
        high *= storyMult * prepMult * paintMult;

      } else if(trade==='Flooring'){
        const floorSqft = Number(document.getElementById('floorSqft')?.value);
        if(!floorSqft || floorSqft < 20){ alert('Please enter a realistic floor area.'); return null; }
        const floorType = document.getElementById('floorType')?.value || 'laminate';

        // Installed price (labor + basic materials). Starter multipliers‚Äîcalibrate with real quotes.
        const typeMult = { laminate:1.00, carpet:0.92, wood:1.18, tile:1.35, stone:1.75 }[floorType] || 1.0;

        // Flooring less sensitive to stories; keep mild.
        const mildStory = { '1':1.00, '2':1.06, '3':1.12 }[stories] || 1.0;

        low = clampMin(floorSqft * rc.perSqLow, rc.min);
        high = clampMin(floorSqft * rc.perSqHigh, rc.min);
        low *= typeMult * mildStory * prepMult;
        high *= typeMult * mildStory * prepMult;

      } else if(trade==='Drywall'){
        const drySqft = Number(document.getElementById('drySqft')?.value);
        if(!drySqft || drySqft < 40){ alert('Please enter a realistic drywall surface area.'); return null; }

        low = clampMin(drySqft * rc.perSqLow, rc.min);
        high = clampMin(drySqft * rc.perSqHigh, rc.min);
        low *= storyMult * prepMult;
        high *= storyMult * prepMult;

      } else if(trade==='Windows & Doors' || trade==='Carpentry'){
        const units = Number(document.getElementById('remUnits')?.value || 2);
        low = clampMin(units * rc.lowEach, rc.min);
        high = clampMin(units * rc.highEach, rc.min);
        low *= storyMult * prepMult;
        high *= storyMult * prepMult;

      } else {
        low = rc.low || rc.min;
        high = rc.high || (rc.min * 3);
      }

      low *= mult; high *= mult;

      // remodel variability: wider band
      low *= 0.88;
      high *= 1.18;

    } else if(current==='plumbing'){
      const svc = svcSelect.value;
      const items = Number(document.getElementById('plUnits').value);
      const rc = RATE.plumbing[svc] || RATE.plumbing['Other'];

      if(rc.lowEach){
        low = clampMin(items * rc.lowEach, rc.min);
        high = clampMin(items * rc.highEach, rc.min);
      } else {
        low = rc.low; high = rc.high;
        if(rc.addHigh){ high += rc.addHigh; }
      }

      low *= mult; high *= mult;
      low *= 0.90; high *= 1.20;

    } else if(current==='hvac'){
      const svc = svcSelect.value;
      const items = Number(document.getElementById('hvUnits').value);
      const rc = RATE.hvac[svc] || RATE.hvac['Commercial / Condo Work'];

      if(rc.lowEach){
        low = clampMin(items * rc.lowEach, rc.min);
        high = clampMin(items * rc.highEach, rc.min);
      } else {
        low = rc.low || rc.min;
        high = rc.high || (rc.min * 5);
      }

      low *= mult; high *= mult;
      low *= 0.90; high *= 1.22;
    }

    const nice = (x) => Math.round(x/10)*10;
    const out = {
      low: nice(low),
      high: nice(high),
      county,
      zip,
      timeline,
      level,
      service: current,
      subtype: svcSelect.value
    };

    if(out.high < out.low){
      const tmp = out.low;
      out.low = out.high;
      out.high = tmp;
    }

    return out;
  }

  document.getElementById('showBtn').addEventListener('click', () => {
    const r = calcRange();
    if(!r) return;
    quoteAmt.textContent = `${money(r.low)} ‚Äì ${money(r.high)}`;
    quoteNote.textContent = 'Estimates are market-based ranges. Final pricing depends on scope, access, materials, and site conditions.';
    window.__lastQuote = r;
    quoteBox.style.display = 'block';
  });

  document.getElementById('matchBtn').addEventListener('click', () => {
    const q = window.__lastQuote;
    if(!q){ alert('Click ‚ÄúShow Price Range‚Äù first.'); return; }

    const name = prompt('Your name:');
    if(!name) return;
    const phone = prompt('Best phone number:');
    if(!phone) return;
    const email = prompt('Email (optional):') || '';

    const subject = encodeURIComponent(`NEW LEAD ‚Äî ${q.service.toUpperCase()} ‚Äî ${q.county} ‚Äî ${q.zip}`);
    const body = encodeURIComponent(
      `Lead details
`+
      `Name: ${name}
Phone: ${phone}
Email: ${email}

`+
      `County: ${q.county}
ZIP: ${q.zip}
`+
      `Service: ${q.service}
Type: ${q.subtype}
`+
      `Timeline: ${q.timeline}
Level: ${q.level}

`+
      `Estimated Range: ${money(q.low)} ‚Äì ${money(q.high)}
`
    );

    window.location.href = `mailto:${ADMIN_EMAIL}?subject=${subject}&body=${body}`;
  });

  // Init
  setActiveTab('cleaning');
  document.getElementById('yr').textContent = new Date().getFullYear();

  // ===== Tests (open DevTools Console to see results) =====
  (function runTests(){
    const mustExist = ['quoteForm','showBtn','matchBtn','svcType','serviceFields','county','zip','quoteBox','quoteAmt'];
    const missing = mustExist.filter(id => !document.getElementById(id));
    if(missing.length){
      console.error('[PriceFirst tests] Missing elements:', missing);
      return;
    }

    // Services object should have expected keys
    const expectedKeys = ['cleaning','pet','remodel','plumbing','hvac'];
    const missingKeys = expectedKeys.filter(k => !(k in SERVICES));
    if(missingKeys.length){
      console.error('[PriceFirst tests] Missing SERVICES keys:', missingKeys);
      return;
    }

    // Ensure remodel list contains flooring + drywall
    console.assert(SERVICES.remodel.includes('Flooring'), '[PriceFirst tests] SERVICES.remodel should include Flooring');
    console.assert(SERVICES.remodel.includes('Drywall'), '[PriceFirst tests] SERVICES.remodel should include Drywall');

    // Zip validation
    console.assert(validateZip('33063') === true, '[PriceFirst tests] validateZip should accept 5 digits');
    console.assert(validateZip('3306') === false, '[PriceFirst tests] validateZip should reject 4 digits');
    console.assert(validateZip('33a63') === false, '[PriceFirst tests] validateZip should reject non-digits');

    // Remodeling dynamic field smoke test
    setActiveTab('remodel');
    svcSelect.value = 'Flooring';
    svcSelect.dispatchEvent(new Event('change'));
    console.assert(!!document.getElementById('floorType'), '[PriceFirst tests] floorType should exist for Flooring');
    svcSelect.value = 'Drywall';
    svcSelect.dispatchEvent(new Event('change'));
    console.assert(!!document.getElementById('drySqft'), '[PriceFirst tests] drySqft should exist for Drywall');

    console.log('[PriceFirst tests] OK');
  })();
</script>
</body>
</html>
